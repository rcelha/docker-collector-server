<html>
  <head>
   <!-- Angular Material CSS now available via Google CDN; version 0.10 used here -->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/0.10.0/angular-material.min.css">

    <script type="text/javascript"
          src="https://www.google.com/jsapi?autoload={
            'modules':[{
              'name':'visualization',
              'version':'1',
              'packages':['corechart']
            }]
          }"></script>

    <script type="text/javascript">

      google.load('visualization', '1', {packages: ['corechart', 'line']});
      google.setOnLoadCallback(drawBasic);

      function foo (elId, rows) {
        var data = new google.visualization.DataTable();
            data.addColumn('datetime', 'X');
            data.addColumn('number', 'Value');

            
            data.addRows(rows);

            var options = {
              hAxis: {
                title: 'Time'
              },
              vAxis: {
                title: 'value'
              }
            };

            var chart = new google.charts.Line(document.getElementById(elId));
            chart.draw(data, options);
      }

      function drawBasic() {
        var rows, elId;
        {% for container, measurements in data.items() %}
          {% for measurement, values in measurements.items() %}
            rows = [
              {% for l in values['labels'] %}
              [new Date("{{ l }}"), {{ values['values'][loop.index0] if values['values'][loop.index0] else "0" }} ],
              {% endfor %}
            ];
            elId = "{{container}}__{{measurement}}__chart";
            foo(elId, rows);
          {% endfor %}
        {% endfor %}
      }
    </script>

  </head>
  <body>
    {% for container, measurements in data.items() %}
      {% for measurement, values in measurements.items() %}
      <md-card>
        <md-content>

          <md-toolbar>
          <div class="md-toolbar-tools">
            <h2>{{container}} {{measurement}}</h2>
          </div>
          </md-toolbar>
          
          <div id="{{container}}__{{measurement}}__chart"  class="md-card-image" style="width: 450px; height: 250px"></div>
        </md-content>
        </md-card>
      {% endfor %}
    {% endfor %}

   <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script>


    <!-- Angular Material Javascript now available via Google CDN; version 0.10 used here -->
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.10.0/angular-material.min.js"></script>

  </body>
</html>